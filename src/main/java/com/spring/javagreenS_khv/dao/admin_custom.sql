DESC CUSTOM_COMP_LOGIN;
DESC CUSTOM_COMP;
-- 기업회원탈퇴목록
SELECT DEL_PRAC.LOGIN_ID, 
	DEL_PRAC.CUSTOM_ID CUSTOM_ID,
	DEL_PRAC.CUSTOM_NM CUSTOM_NM, 
	DEL_PRAC.COMPANY_NO COMPANY_NO, 
	DEL_PRAC.OVER_DAYS_USER_DEL OVER_DAYS_USER_DEL,
	IFNULL(DEL_OVER.OVER_FLG, 'PRAC') OVER_FLG, 
	DEL_PRAC.DELETE_DATE DELETE_DATE, 
	DEL_PRAC.DELETE_USER DELETE_USER 
FROM 
	(SELECT A.LOGIN_ID, A.CUSTOM_ID, B.CUSTOM_NM, B.COMPANY_NO, TIMESTAMPDIFF(DAY, A.DELETE_DATE, NOW()) AS OVER_DAYS_USER_DEL, A.DELETE_DATE, A.DELETE_USER   
	FROM CUSTOM_COMP_LOGIN A, CUSTOM_COMP B
	WHERE A.DELETE_DATE IS NOT NULL -- 탈퇴회원(임시탈퇴자, 로그인삭제일) 
	AND A.CUSTOM_ID = B.CUSTOM_ID
	) AS DEL_PRAC 
LEFT OUTER JOIN 
	(SELECT CUSTOM_ID, 'OVER' AS OVER_FLG 
	FROM CUSTOM_COMP_LOGIN 
	WHERE TIMESTAMPDIFF(DAY, DELETE_DATE, NOW()) >= 30 
	) AS DEL_OVER 
ON DEL_PRAC.CUSTOM_ID = DEL_OVER.CUSTOM_ID 
ORDER BY OVER_FLG ASC, OVER_DAYS_USER_DEL DESC



		
DESC CUSTOM_PERSON_LOGIN;
DESC CUSTOM_PERSON;
		
		SELECT DEL_PRAC.LOGIN_ID, 
			DEL_PRAC.CUSTOM_ID CUSTOM_ID,
			DEL_PRAC.CUSTOM_NM CUSTOM_NM, 
			DEL_PRAC.BIRTH_DATE BIRTH_DATE, 
			DEL_PRAC.OVER_DAYS_USER_DEL OVER_DAYS_USER_DEL,
			IFNULL(DEL_OVER.OVER_FLG, 'PRAC') OVER_FLG, 
			DEL_PRAC.DELETE_DATE DELETE_DATE, 
			DEL_PRAC.DELETE_USER DELETE_USER 
		FROM 
			(SELECT A.LOGIN_ID, A.CUSTOM_ID, B.CUSTOM_NM, B.BIRTH_DATE, TIMESTAMPDIFF(DAY, A.DELETE_DATE, NOW()) AS OVER_DAYS_USER_DEL, A.DELETE_DATE, A.DELETE_USER   
			FROM CUSTOM_PERSON_LOGIN A, CUSTOM_PERSON B
			WHERE A.DELETE_DATE IS NOT NULL -- 탈퇴회원(임시탈퇴자, 로그인삭제일) 
			AND A.CUSTOM_ID = B.CUSTOM_ID
			) AS DEL_PRAC 
		LEFT OUTER JOIN 
			(SELECT CUSTOM_ID, 'OVER' AS OVER_FLG 
			FROM CUSTOM_PERSON_LOGIN 
			WHERE TIMESTAMPDIFF(DAY, DELETE_DATE, NOW()) >= 30 
			) AS DEL_OVER 
		ON DEL_PRAC.CUSTOM_ID = DEL_OVER.CUSTOM_ID 
		ORDER BY OVER_FLG ASC, OVER_DAYS_USER_DEL DESC


SELECT *, TIMESTAMPDIFF(DAY, DELETE_DATE, NOW()) AS OVERDAYSUSERDEL 
FROM CUSTOM_COMP_LOGIN 
WHERE DATE_SUB(NOW(), INTERVAL 1 MONTH ) <= CREATE_DATE  -- 가입 1개월차 기본조건
ORDER BY SEQ DESC LIMIT 0, 5

SELECT A.SEQ, A.LOGIN_ID, B.CUSTOM_NM_SHORT, (SELECT CUSTOM_KIND_NM FROM CUSTOM_KIND WHERE CUSTOM_KIND_CD = B.CUSTOM_KIND_CD) AS CUSTOM_KIND_NM, A.DELETE_DATE 
FROM CUSTOM_COMP_LOGIN A, CUSTOM_COMP B 
WHERE A.CUSTOM_ID = B.CUSTOM_ID 
AND DATE_SUB(NOW(), INTERVAL 1 MONTH ) <= A.DELETE_DATE  -- 임시회원탈퇴 기본조건
ORDER BY SEQ DESC LIMIT 0, 5; 

SELECT A.SEQ, A.LOGIN_ID, B.CUSTOM_NM, (SELECT CUSTOM_KIND_NM FROM CUSTOM_KIND WHERE CUSTOM_KIND_CD = B.CUSTOM_KIND_CD) AS CUSTOM_KIND_NM, A.CREATE_DATE 
FROM CUSTOM_PERSON_LOGIN A, CUSTOM_PERSON B 
WHERE A.CUSTOM_ID = B.CUSTOM_ID 
AND DATE_SUB(NOW(), INTERVAL 1 MONTH ) <= A.CREATE_DATE  -- 가입 1개월차 기본조건
ORDER BY SEQ DESC LIMIT 0, 5;





